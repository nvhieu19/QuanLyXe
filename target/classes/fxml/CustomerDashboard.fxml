<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!-- Main Layout: BorderPane giá»‘ng Admin -->
<BorderPane minHeight="700.0" minWidth="1200.0" 
            style="-fx-background-color: #f4f6f9;"
            xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" 
            fx:controller="com.fucar.controller.CustomerDashboardController">
    
    <!-- LEFT SIDEBAR (Äá»“ng bá»™ vá»›i AdminDashboard) -->
    <left>
        <VBox prefWidth="250.0" spacing="10" style="-fx-background-color: #2c3e50;" styleClass="side-menu">
            <padding>
                <Insets bottom="20" left="10" right="10" top="20" />
            </padding>

            <!-- App Logo and Title -->
            <VBox alignment="CENTER" spacing="10.0" styleClass="side-menu-header">
                <Label styleClass="app-logo-side" text="ðŸš—">
                    <font><Font size="40.0" /></font>
                </Label>
                <Label style="-fx-text-fill: #ecf0f1;" styleClass="app-title-side" text="FU Car Renting">
                    <font><Font name="System Bold" size="18.0" /></font>
                </Label>
                <Label text="Customer Portal" textFill="#95a5a6">
                    <font><Font name="System Italic" size="12.0" /></font>
                </Label>
            </VBox>

            <Separator prefWidth="200.0" style="-fx-opacity: 0.5;" />

            <!-- Spacer Ä‘á»ƒ Ä‘áº©y User Info xuá»‘ng dÆ°á»›i -->
            <Region VBox.vgrow="ALWAYS" />

            <!-- User Info and Logout (Chuyá»ƒn tá»« Top xuá»‘ng Ä‘Ã¢y) -->
            <VBox alignment="CENTER" spacing="10.0" styleClass="side-menu-footer">
                <Separator prefWidth="200.0" style="-fx-opacity: 0.5;" />
                
                <!-- Label Welcome giá»¯ nguyÃªn fx:id Ä‘á»ƒ Controller set text -->
                <Label fx:id="lblWelcome" style="-fx-text-fill: #bdc3c7;" styleClass="welcome-text" text="Welcome, Customer">
                    <font><Font size="13.0" /></font>
                </Label>
                
                <!-- NÃºt Logout giá»¯ nguyÃªn onAction -->
                <Button fx:id="btnLogout" maxWidth="Infinity" onAction="#handleLogout" styleClass="logout-button" text="ÄÄ‚NG XUáº¤T">
                    <font><Font name="System Bold" size="13.0" /></font>
                    <padding>
                        <Insets bottom="10" top="10" />
                    </padding>
                </Button>
            </VBox>
        </VBox>
    </left>
    
    <!-- CENTER CONTENT -->
    <center>
        <!-- TabPane chá»©a ná»™i dung chÃ­nh -->
        <StackPane style="-fx-background-color: #f4f6f9;">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            
            <TabPane styleClass="customer-tabs" tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: transparent;">
                
                <!-- Tab 1: Profile -->
                <Tab text="ðŸ‘¤ Há»“ sÆ¡ CÃ¡ nhÃ¢n">
                    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" styleClass="tab-scroll">
                        <content>
                            <VBox spacing="20.0" style="-fx-background-color: white; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                                <padding>
                                    <Insets bottom="25.0" left="30.0" right="30.0" top="25.0" />
                                </padding>
                                
                                <VBox spacing="15.0" styleClass="customer-section">
                                    <Label styleClass="customer-section-title" text="ThÃ´ng tin CÃ¡ nhÃ¢n" textFill="#2c3e50">
                                        <font><Font name="System Bold" size="18.0" /></font>
                                    </Label>
                                    <Separator />
                                    
                                    <GridPane hgap="20.0" vgap="20.0">
                                        <Label text="Há» vÃ  tÃªn:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtCustomerName" prefWidth="300.0" style="-fx-background-radius: 3;" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                        
                                        <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i:" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtMobile" prefWidth="300.0" style="-fx-background-radius: 3;" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                                        
                                        <Label text="NgÃ y sinh:" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <DatePicker fx:id="dpBirthday" prefWidth="300.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                        
                                        <Label text="CMND/CCCD:" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtIdentityCard" prefWidth="300.0" style="-fx-background-radius: 3;" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                                        
                                        <Label text="Sá»‘ GPLX:" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtLicenceNumber" prefWidth="300.0" style="-fx-background-radius: 3;" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                        
                                        <Label text="NgÃ y cáº¥p GPLX:" GridPane.columnIndex="2" GridPane.rowIndex="2">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <DatePicker fx:id="dpLicenceDate" prefWidth="300.0" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                                        
                                        <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="3">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtEmail" prefWidth="300.0" style="-fx-background-radius: 3;" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="3" />
                                        
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="NEVER" minWidth="130.0" />
                                            <ColumnConstraints hgrow="ALWAYS" />
                                            <ColumnConstraints hgrow="NEVER" minWidth="130.0" />
                                            <ColumnConstraints hgrow="ALWAYS" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                            <RowConstraints />
                                            <RowConstraints />
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
                                    
                                    <HBox alignment="CENTER_RIGHT" spacing="10">
                                        <Button fx:id="btnUpdateProfile" onAction="#handleUpdateProfile" prefHeight="40.0" prefWidth="200.0" style="-fx-background-color: #27ae60; -fx-text-fill: white;" styleClass="btn-success" text="ðŸ’¾ Cáº¬P NHáº¬T THÃ”NG TIN">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Button>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </content>
                    </ScrollPane>
                </Tab>
                
                <!-- Tab 2: Account -->
                <Tab text="ðŸ” TÃ i khoáº£n">
                    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" styleClass="tab-scroll">
                        <content>
                            <VBox spacing="20.0">
                                <padding>
                                    <Insets bottom="25.0" left="30.0" right="30.0" top="25.0" />
                                </padding>
                                
                                <!-- Khá»‘i 1: Info -->
                                <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                                    <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                                    <Label styleClass="customer-section-title" text="ThÃ´ng tin ÄÄƒng nháº­p" textFill="#2c3e50">
                                        <font><Font name="System Bold" size="16.0" /></font>
                                    </Label>
                                    <Separator />
                                    <GridPane hgap="20.0" vgap="15.0">
                                        <Label text="TÃªn Ä‘Äƒng nháº­p:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <font><Font size="13.0" /></font>
                                        </Label>
                                        <TextField fx:id="txtAccountName" editable="false" prefWidth="400.0" style="-fx-background-color: #ecf0f1;" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="NEVER" minWidth="150.0" />
                                            <ColumnConstraints hgrow="ALWAYS" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
                                </VBox>
                                
                                <!-- Khá»‘i 2: Password -->
                                <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                                    <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                                    <Label styleClass="customer-section-title" text="Äá»•i Máº­t kháº©u" textFill="#2c3e50">
                                        <font><Font name="System Bold" size="16.0" /></font>
                                    </Label>
                                    <Separator />
                                    
                                    <GridPane hgap="20.0" vgap="15.0">
                                        <Label text="Máº­t kháº©u cÅ©:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <font><Font size="13.0" /></font>
                                        </Label>
                                        <PasswordField fx:id="txtOldPassword" prefWidth="400.0" promptText="Nháº­p máº­t kháº©u hiá»‡n táº¡i" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                        
                                        <Label text="Máº­t kháº©u má»›i:" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                            <font><Font size="13.0" /></font>
                                        </Label>
                                        <PasswordField fx:id="txtNewPassword" prefWidth="400.0" promptText="Nháº­p máº­t kháº©u má»›i (tá»‘i thiá»ƒu 6 kÃ½ tá»±)" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                        
                                        <Label text="XÃ¡c nháº­n máº­t kháº©u:" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                            <font><Font size="13.0" /></font>
                                        </Label>
                                        <PasswordField fx:id="txtConfirmPassword" prefWidth="400.0" promptText="Nháº­p láº¡i máº­t kháº©u má»›i" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                        
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="NEVER" minWidth="150.0" />
                                            <ColumnConstraints hgrow="ALWAYS" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints />
                                            <RowConstraints />
                                            <RowConstraints />
                                        </rowConstraints>
                                    </GridPane>
                                    
                                    <HBox alignment="CENTER_RIGHT">
                                        <Button fx:id="btnUpdateAccount" onAction="#handleUpdateAccount" prefHeight="40.0" prefWidth="200.0" style="-fx-background-color: #f39c12; -fx-text-fill: white;" styleClass="btn-warning" text="ðŸ”‘ Äá»”I Máº¬T KHáº¨U">
                                            <font><Font name="System Bold" size="13.0" /></font>
                                        </Button>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </content>
                    </ScrollPane>
                </Tab>
                
                <!-- Tab 3: History -->
                <Tab text="ðŸ“œ Lá»‹ch sá»­ ThuÃª xe">
                    <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                        <padding>
                            <Insets bottom="20.0" left="25.0" right="25.0" top="20.0" />
                        </padding>
                        
                        <HBox alignment="CENTER_LEFT">
                            <Label styleClass="customer-section-title" text="Danh sÃ¡ch Giao dá»‹ch" textFill="#2c3e50">
                                <font><Font name="System Bold" size="18.0" /></font>
                            </Label>
                            <Region HBox.hgrow="ALWAYS" />
                        </HBox>
                        <Separator />
                        
                        <TableView fx:id="tblRentalHistory" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colCarName" prefWidth="300.0" text="TÃªn Xe" />
                                <TableColumn fx:id="colPickupDate" prefWidth="150.0" style="-fx-alignment: CENTER;" text="NgÃ y nháº­n" />
                                <TableColumn fx:id="colReturnDate" prefWidth="150.0" style="-fx-alignment: CENTER;" text="NgÃ y tráº£" />
                                <TableColumn fx:id="colRentPrice" prefWidth="150.0" style="-fx-alignment: CENTER-RIGHT;" text="GiÃ¡ thuÃª (VND)" />
                                <TableColumn fx:id="colStatus" prefWidth="150.0" style="-fx-alignment: CENTER;" text="Tráº¡ng thÃ¡i" />
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>
            </TabPane>
        </StackPane>
    </center>
</BorderPane>